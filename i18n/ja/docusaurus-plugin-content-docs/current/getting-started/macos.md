---
title: macOSにGSMをインストールする
sidebar_label: macOS
sidebar_position: 4
---

# macOSでのGameSentenceMiner

Macユーザーの皆さん、ようこそ！コミュニティメンバーの熱心なトラブルシューティングのおかげで、macOS用のGameSentenceMinerの動作ビルドが完成しました。

:::note
Macのサポートは新しく、実験的と見なされています。OCRやAnki連携などのコア機能は動作していますが、Windows/Linuxで利用可能ないくつかの機能は限定的または機能しません。このガイドの最後にある既知の問題リストにご注意ください。
:::

## 1. 前提条件

始める前に、いくつかの主要なソフトウェアをインストールする必要があります。macOSのパッケージマネージャーである[Homebrew](https://brew.sh/)を使用してインストールすることを強くお勧めします。

-   **Homebrew**: もしまだインストールしていない場合は、ターミナルを開いて次を実行してください：
    ```sh
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    ```
-   **Python 3.11**: GSMは3.10、3.11、3.12、または3.13で機能します。Windows上のGSMはデフォルトで3.13で実行されるため、それを使用することをお勧めします。現在、Macの自動インストールは少し壊れているため、Python部分をインストールするためにこの一連のコマンドを実行する必要があるかもしれません。
    ```sh
    brew install python@3.13
    python3.13 -m venv ~/.config/GameSentenceMiner/python_venv
    ~/.config/GameSentenceMiner/python_venv/bin/python -m ensurepip --upgrade
    ~/.config/GameSentenceMiner/python_venv/bin/python -m pip install uv
    ~/.config/GameSentenceMiner/python_venv/bin/python -m uv pip install --prerelease=allow gamesentenceminer
    ```
-   **FFmpeg**: ゲーム映像から音声やビデオを処理するために必要です。
    ```sh
    brew install ffmpeg
    ```
-   **OBS Studio**: ゲーム画面をOCRのためにキャプチャするために使用します。[公式サイト](https://obsproject.com/)からダウンロードしてインストールしてください。
-   **Anki**: フラッシュカードアプリケーションです。[公式サイト](https://apps.ankiweb.net/)からダウンロードしてインストールしてください。
    -   Anki内で**AnkiConnect**アドオンもインストールする必要があります（`ツール` > `アドオン` > `アドオンを取得...`）。コードを使用してください：**`2055492159`**

## 2. OBSの設定

GSMはOBSに接続して画面をキャプチャします。このためにOBSを正しく設定する必要があります。

1.  **WebSocketサーバーを有効にする**:
    -   OBSで、`ツール` -> `WebSocketサーバー設定`に移動します。
    -   `WebSocketサーバーを有効にする`をチェックします。
    -   **重要**: `認証を有効にする`のチェックを外します。今のところ、macOSでのGSMの接続は認証をオフにした方が最適に機能します。
    -   サーバーポートを'7274'（GSMのデフォルトポート）に変更します。
    -   `OK`をクリックして設定を保存します。

2.  **リプレイバッファを有効にする**:
    -   `設定` -> `出力`に移動します。
    -   `リプレイバッファ`セクションに移動します。
    -   `リプレイバッファを有効にする`をチェックします。
    -   `最大リプレイ時間`を少なくとも`60`秒に設定します。（より柔軟性を持たせるために300秒を推奨します。）

3.  **シーンを設定する**:
    -   OBSでゲームウィンドウまたはフルスクリーンをキャプチャするシーンを作成します。
    -   プレビューウィンドウでゲームが表示されていることを確認します。
    -   カードに文章の音声を入れるために、音声がキャプチャされていることを確認します。

## 3. GameSentenceMinerのインストール

これでGSMアプリケーション自体をインストールできます。

1.  **`.dmg`ファイルをダウンロードする**:
    -   [GitHubの最新GSMリリース](https://github.com/bpwhelan/GameSentenceMiner/releases/latest)にアクセスします。
    -   `-arm64.dmg`または`.dmg`で終わるアセットをダウンロードします。

2.  **アプリケーションをインストールする**:
    -   ダウンロードした`.dmg`ファイルを開きます。
    -   `GameSentenceMiner.app`アイコンを`アプリケーション`フォルダにドラッグします。

3.  **検疫属性を削除する**:
    -   macOSのGatekeeperは、「未確認の開発者」からのアプリであるため、アプリの実行をブロックする可能性が高いです。検疫フラグを手動で削除する必要があります。
    -   **ターミナル**を開き、次のコマンドを実行します：
    ```sh
    xattr -d com.apple.quarantine /Applications/GameSentenceMiner.app
    ```
    :::warning
    この手順は必ず実行してください。さもないと、「GameSentenceMiner.appは破損しているため開けません」というエラーメッセージが表示されます。アプリは破損しておらず、これは標準的なmacOSのセキュリティです。コードサイニングには費用がかかり、現時点ではその費用を支払うつもりはありません。
    :::

4.  **初回起動**:
    -   これで、アプリケーションフォルダからGameSentenceMinerを起動できます。
    -   初回実行時、Python仮想環境をセットアップし、必要なすべての依存関係をインストールします。これには数分かかる場合があります。

## 既知の問題と回避策

-   **ゲームオーバーレイは機能しません。** 将来的には機能するかもしれませんが、現在、オーバーレイ機能はmacOSでは動作しません。
    -   **回避策:** マイニングには**テキストフッカーページ**を使用してください。GSMのメインウィンドウからアクセスできます。これにより、OCRされたテキストの表示やカード作成のコア機能が同じように提供されます。

-  **OBSシーンは自分で設定する必要があります。** 自動OBSシーン設定機能はmacOSでは機能しません。
    -   **回避策:** OBSで必要なシーンを手動で作成してください。[OBSの設定](#2-obsの設定)セクションを参照してください。

-   **グローバルホットキーは動作しません。** Pythonの`keyboard`ライブラリにはmacOSでの制限があり、特別な許可なしにグローバルホットキーを登録することができません。
    -   **回避策:** GSMアプリ内のGUIボタン（例：「自動OCRを開始」、「手動OCR」）を使用してOCRを制御してください。

-   **アプリのメニューバーとトレイアイコンの機能は限定的です。** 標準のmacOSメニューバーオプション（ファイル、編集など）は完全には実装されていません。アップデートを確認するオプションが存在しない場合があります。
    -   **回避策:** アプリをアップデートするには、GitHubのリリースぺージから最新の`.dmg`ファイルをダウンロードして再インストールする必要があるでしょう。

-   **自動更新は機能しない可能性があります。** 自動更新のプロンプトが表示されるかもしれませんが、macOSでの更新プロセスが確実に機能することは確認されていません。今のところ、GitHubのリリースぺージから最新のリリースを手動で取得して更新してください。

## フィードバックとサポート
問題が発生した場合や、macOSエクスペリエンスを向上させるための提案がある場合は、[GitHubリポジトリ](https://github.com/bpwhelan/GameSentenceMiner/issues)でissueを開くか、[Discordサーバー](https://discord.gg/yP8Qse6bb8)に参加して他のユーザーや開発者と話し合ってください。
