---
title: GameSentenceMiner 設定ガイド
sidebar_label: 設定
sidebar_position: 5
toc_min_heading_level: 2
toc_max_heading_level: 2
---

# GameSentenceMiner 設定ガイド

このドキュメントは、GameSentenceMinerの設定ウィンドウで利用可能なすべての設定についての包括的な概要を提供します。これらのオプションを理解することで、テキストフッカー、OCR、またはツールの組み合わせを使用している場合でも、特定のセンテンスマイニングのワークフローに合わせてアプリケーションを調整するのに役立ちます。

## 設定の凡例

設定ウィンドウ全体で、一部の設定ラベルは重要度を示すために色分けされています。それぞれの意味は次のとおりです。

-   <span style={{color: 'darkorange', fontWeight: 'bold'}}>オレンジ色のテキスト</span>: **重要/必須設定**。これらの設定はGSMのコア機能にとって非常に重要です。これらの設定に誤った値や欠落した値があると、アプリケーションが失敗したり、期待どおりに動作しなかったりする可能性があります。
-   <span style={{color: 'red', fontWeight: 'bold'}}>赤色のテキスト</span>: **上級/潜在的に危険な設定**。これらは動作を大幅に変更する可能性のある上級オプションです。意図しない副作用がある場合や、基盤となるツール（FFmpegなど）についての深い理解が必要な場合があります。注意して使用してください。
-   <span style={{color: 'green', fontWeight: 'bold'}}>緑色のテキスト</span>: **推奨/QoL（生活の質）設定**。これらの設定はオプションですが、より良く、整理され、効率的なユーザーエクスペリエンスのために強く推奨されます。

---

## 目次

1.  [キー設定タブ](#key-settings-tab)
2.  [一般タブ](#general-tab)
3.  [パス設定タブ](#paths-tab)
4.  [Ankiタブ](#anki-tab)
5.  [VAD（音声区間検出）タブ](#vad-tab)
6.  [機能タブ](#features-tab)
7.  [スクリーンショットタブ](#screenshot-tab)
8.  [音声タブ](#audio-tab)
9.  [OBSタブ](#obs-tab)
10. [プロファイルタブ](#profiles-tab)
11. [AIタブ](#ai-tab)
12. [詳細設定タブ](#advanced-tab)
13. [オーバーレイタブ](#overlay-tab)

---

## キー設定タブ {#key-settings-tab}

このタブは、すぐに始められるように最も重要な設定を簡略化して表示します。このタブのすべての設定は、それぞれの詳細タブでも利用できます。

### テキスト入力

<span style={{color: 'darkorange', fontWeight: 'bold'}}>Websocket 有効 / クリップボード 有効</span>
- **ツールヒント**: WebSocket/クリップボード通信を有効または無効にします。
- **デフォルト値**: Websocket `True`, クリップボード `True`。
- **詳細**: これらはGSMにテキストを取り込むための2つの主要な方法です。
    - **Websocket**: GSMは、内蔵のTexthookerページやTextractorなどの外部ツールから送信されたテキストをリッスンします。高速で信頼性が高いため、この方法を推奨します。
    - **クリップボード**: GSMはシステムのクリップボードを監視して新しいテキストを検出します。テキストフッカーがWebSocketをサポートしていない場合の代替手段として適しています。
:::note
デフォルトでは、WebSocket接続がアクティブな場合、重複エントリを防ぐためにクリップボード監視は一時停止します。この動作は**一般タブ**で変更できます。
:::

<span style={{color: 'darkorange', fontWeight: 'bold'}}>Websocket URI</span>
- **ツールヒント**: 接続用のWebSocket URI。複数のソースに接続するためにカンマ区切りの値を使用できます。
- **デフォルト値**: `localhost:6677,localhost:9001,localhost:2333`
- **詳細**: GSMが受信テキストをリッスンする場所を指定します。デフォルト値は**Textractor**、**Agent**、**LunaTranslator**の標準ポートをカバーしています。カンマで区切ってさらにURIを追加できます。

### ファイルパス

<span style={{color: 'darkorange', fontWeight: 'bold'}}>監視するフォルダ</span>
- **ツールヒント**: OBSリプレイが保存されるパス。
- **デフォルト値**: `~/Videos/GSM`
- **詳細**: これは重要な設定です。OBS設定（`設定 -> 出力 -> リプレイバッファ`）の「リプレイバッファ出力ディレクトリ」と**一致している必要があります**。GSMはこのフォルダを監視して新しいビデオファイルを処理します。

### Anki設定

<span style={{color: 'darkorange', fontWeight: 'bold'}}>Ankiフィールドマッピング</span>
- **詳細**: これらのフィールドはAnki連携の中核です。GSMが入力するAnkiノートタイプのフィールドの**正確な名前**（大文字と小文字を区別）を入力する必要があります。
    - **Sentence Field**: 完全な日本語の文のフィールド。（デフォルト: `Sentence`）
    - **Sentence Audio Field**: 音声の`[sound:...]`タグが配置されるフィールド。（デフォルト: `SentenceAudio`）
    - **Picture Field**: スクリーンショット用のフィールド。（デフォルト: `Picture`）
    - **Word Field**: マイニングしている対象の単語や表現を含むフィールド。GSMはこれを使用して更新するAnkiカードを識別します。（デフォルト: `Expression`）

### 音声処理

<span style={{color: 'darkorange', fontWeight: 'bold'}}>音声抽出開始オフセット</span>
- **ツールヒント**: ビデオの開始から音声を抽出するまでのオフセット（秒）。通常は負または0である必要があります。
- **デフォルト値**: `-0.5`
- **詳細**: 正確な音声のための重要な設定。リプレイバッファはホットキーを押す*前*のビデオを保存するため、この値はテキストが表示される何秒*前*にオーディオクリップを開始するかをGSMに伝えます。`-0.5`のような小さな負の値は、テキストが画面に表示される少し前に始まる話し言葉の冒頭をキャプチャするのに役立ちます。

<span style={{color: 'red', fontWeight: 'bold'}}>音声抽出終了オフセット（VAD前）</span>
- **ツールヒント**: VAD処理が開始される前に末尾からトリミングするオフセット（秒）。
- **デフォルト値**: `0.5`
- **詳細**: これは、音声区間検出（VAD）モデルに供給される生の音声スライスの長さを定義します。これは行の期間（次の行が表示されるまでの時間）に追加されます。`0.5`の値は、クリップが行の画面上の期間より0.5秒長くなることを意味し、VADにバッファを与えます。

### 機能の切り替え

**Anki編集を開く / Ankiノートをブラウザで開く**
- **ツールヒント**: 更新後にAnkiを編集用に、またはブラウザで自動的に開きます。
- **詳細**: 即時のフィードバックを提供します。カードを更新した後、GSMはAnkiカードエディタウィンドウを直接開くか、更新されたばかりのカードに焦点を当てたAnkiブラウザを開くことができます。

---

## 一般タブ {#general-tab}

このタブには、GSMが入力を受け取る方法と一般的なアプリケーションの動作に関する最も基本的な設定が含まれています。

<span style={{color: 'darkorange', fontWeight: 'bold'}}>Websocket 有効</span>
- **ツールヒント**: WebSocket通信を有効または無効にします。これを有効にすると、クリップボードモニターが無効になります。
- **デフォルト値**: `True`
- **詳細**: これはGSMにテキストを取り込むための2つの主要な方法の1つです。有効にすると、GSMは他のアプリケーション（最も一般的にはGSMに組み込まれているブラウザベースのテキストフッカーなど）からテキストを受信できるWebSocketサーバーを開きます。この方法は一般的にクリップボード監視よりも高速で信頼性があります。これは入力の**推奨**方法であり、これがオンの場合、クリップボード監視はデフォルトで無効になります。
:::info
この設定は**キー設定**タブでも利用できます。
:::

<span style={{color: 'darkorange', fontWeight: 'bold'}}>クリップボード 有効</span>
- **ツールヒント**: クリップボード監視を有効または無効にします。
- **デフォルト値**: `True`
- **詳細**: これはGSMにテキストを取り込むための2番目の主要な方法です。有効にすると、GSMはシステムのクリップボードを常に監視します。新しいテキストがコピーされるたびに、GSMはそれを新しい行として処理します。テキストフック方法がWebSocketをサポートしていない場合に使用します。信頼性の高い代替手段ですが、誤ってトリガーされる可能性があります。
:::info
この設定は**キー設定**タブでも利用できます。
:::

<span style={{color: 'red', fontWeight: 'bold'}}>両方を同時に許可</span>
- **ツールヒント**: GSMがクリップボードとWebSocketの両方の入力を同時に受け入れるようにします。
- **デフォルト値**: `False`
- **詳細**: デフォルトでは、GSMは1つの入力方法を優先します。この高度な設定により、WebSocketサーバーとクリップボードモニターの両方を同時にアクティブにすることができます。注意しないと、重複したエントリが発生する可能性があります（たとえば、テキストフッカーがWebSocket経由で送信し、*かつ*クリップボードにコピーする場合）。異なるソースからの同時入力が必要な特定のワークフローに対してのみ有効にしてください。

<span style={{color: 'red', fontWeight: 'bold'}}>一致する連続テキストをマージ</span>
- **ツールヒント**: 同じ文の一部であると思われる連続したテキスト行をマージします。
- **デフォルト値**: `False`
- **詳細**: 一部のゲームでは、対話が1行ずつまたは1文字ずつ送信されます。この機能は、これらの断片を1つの完全な文にマージしようとします。短い時間待機して、新しいテキストが前のテキストの続きである場合はマージします。これは調整が必要な高度な機能であり、ゲームによっては予測不能な動作をする可能性があります。

<span style={{color: 'darkorange', fontWeight: 'bold'}}>Websocket URI</span>
- **ツールヒント**: 接続用のWebSocket URI。複数のURIをカンマで区切って複数接続できます。
- **デフォルト値**: `localhost:6677,localhost:9001,localhost:2333` (Textractor, Agent, Luna)
- **詳細**: GSMがリッスンするWebSocketサーバーのアドレスとポートを指定します。カンマ区切りのリストを提供して、複数のソース（テキストフッカーやOCRツールなど）を同時にリッスンできます。デフォルト値は、一般的なテキストフックツールのいくつかの共通ポートに設定されています。
:::info
この設定は**キー設定**タブでも利用できます。
:::

**テキストフック置換正規表現**
- **ツールヒント**: テキストフック入力に置換を実行する正規表現。テキストフックページで設定しているものと同じに設定してください。
- **デフォルト値**: `""` (空文字列)
- **詳細**: GSMが処理する前に入力テキストを自動的にクリーンアップするための正規表現（Regex）を指定できます。制御コードや話者名などのアーティファクトを削除するのに役立ちます。これは、テキストフッカーで設定した置換ルールを反映する必要があります。

**起動時に設定を開く**
- **ツールヒント**: スクリプト開始時に設定を開くかどうか。
- **デフォルト値**: `False`
- **詳細**: 便利な設定。チェックすると、GameSentenceMinerを起動するたびにこの設定ウィンドウが自動的に表示されます。

**起動時にGSMテキストフッカーを開く**
- **ツールヒント**: スクリプト開始時にテキストフックページを開くかどうか。
- **デフォルト値**: `True`
- **詳細**: チェックすると、起動時にデフォルトのWebブラウザが組み込みのGSMテキストフッカーページを自動的に開きます。

**GSMテキストフッカーポート**
- **ツールヒント**: テキストフッカーを実行するポート。何をしているか分かっている場合のみ変更してください。
- **デフォルト値**: `55000`
- **詳細**: 組み込みのテキストフッカーWebページのネットワークポートを指定します。デフォルトのポートがシステム上の別のアプリケーションですでに使用されている場合にのみ変更してください。

**母国語**
- **ツールヒント**: AI翻訳やその他の機能で使用されるあなたの母国語。
- **デフォルト値**: `English`
- **詳細**: ドロップダウンから母国語を選択します。これは主にAI機能が日本語のテキストをどの言語に翻訳するかを知るために使用されます。

---

## パス設定タブ {#paths-tab}

このタブは、すべての重要なファイルとフォルダの場所を設定するためのものです。

<span style={{color: 'darkorange', fontWeight: 'bold'}}>監視するフォルダ</span>
- **ツールヒント**: OBSリプレイが保存されるパス。
- **デフォルト値**: `~/Videos/GSM`
- **詳細**: これは重要なパス設定です。OBSがリプレイバッファファイルを保存するように設定されているディレクトリと**正確に**一致する必要があります。`~`記号は、ユーザーのホームディレクトリ（Windowsでは`C:\Users\YourName`など）に自動的に展開されます。
:::info
この設定は**キー設定**タブでも利用できます。
:::

**一時ファイルを出力フォルダにコピー**
- **ツールヒント**: 一時ファイル（音声、スクリーンショット）を出力フォルダにコピーします。
- **デフォルト値**: `False`
- **詳細**: 有効にすると、GSMはマイニングされた各単語の「出力フォルダ」にサブフォルダを作成し、最終的な音声ファイルとスクリーンショットファイルをそこにコピーします。これは、Ankiの外でマイニングしたコンテンツの整理された長期アーカイブを構築するのに最適です。

**カード作成時に出力フォルダを開く**
- **ツールヒント**: カードが作成されたときにファイルエクスプローラーで出力フォルダを開きます。
- **デフォルト値**: `False`
- **詳細**: 新しくマイニングされたカードのメディアが保存された特定のサブフォルダ（上記の設定で作成）を自動的に開く便利な機能です。

**トリミングされたリプレイを出力フォルダにコピー**
- **ツールヒント**: マイニングされた行だけを含むトリミングされたビデオリプレイを出力フォルダにコピーします。
- **デフォルト値**: `False`
- **詳細**: 音声とスクリーンショットに加えて、マイニングされた文の短いビデオクリップを単語の出力フォルダに保存します。「一時ファイルをコピー」設定が有効になっている必要があります。

**ビデオを削除**
- **ツールヒント**: 処理後、「監視するフォルダ」からソースビデオを削除します。
- **デフォルト値**: `True`
- **詳細**: 有効にすると、GSMは正常に処理された後、元のOBSリプレイビデオファイルを削除します。ディスク容量を節約し、監視フォルダをきれいに保つために強く推奨されます。

---

## Ankiタブ {#anki-tab}

このタブは、更新するフィールドやカードにタグを付ける方法など、Ankiとのすべての対話を制御します。

**Ankiを更新**
- **ツールヒント**: 新しいデータでAnkiを自動的に更新します。
- **デフォルト値**: `True`
- **詳細**: すべてのAnki統合のマスタースイッチ。無効にすると、GSMはメディアを処理しますが、Ankiへの接続やカードの更新は試みません。

<span style={{color: 'red', fontWeight: 'bold'}}>更新確認ダイアログを表示</span>
- **ツールヒント**: Ankiカードを更新する前に確認ダイアログを表示します。
- **デフォルト値**: `False`
- **詳細**: 有効にすると、Ankiの各更新の前にポップアップウィンドウが表示されます。このダイアログでは、次のことができます。
    - 文と翻訳を編集する。
    - スクリーンショットセレクターを使用して別のスクリーンショットを選択する。
    - ゲーム音声の代わりにテキスト読み上げ（TTS）音声を生成する。
    - 音声を含めるかどうかを決定する。
    - カードに「NSFW」タグを追加する。

<span style={{color: 'darkorange', fontWeight: 'bold'}}>Anki URL</span>
- **ツールヒント**: Ankiインスタンスに接続するためのURL。
- **デフォルト値**: `http://127.0.0.1:8765`
- **詳細**: GSMがAnkiと通信できるようにするAnkiConnectアドオンのアドレス。デフォルト値はほとんどのユーザーで機能するはずです。[AnkiConnect](https://ankiweb.net/shared/info/2055492159)アドオンがインストールされ、Ankiが実行されている必要があります。

<span style={{color: 'darkorange', fontWeight: 'bold'}}>フィールドマッピング</span>
- **詳細**: これらのフィールドはAnki統合の中核です。GSMが入力するAnkiノートタイプのフィールドの**正確な名前**（大文字と小文字を区別）を入力する必要があります。
    - **Sentence Field**: `デフォルト: "Sentence"`
    - **Sentence Audio Field**: `デフォルト: "SentenceAudio"`
    - **Picture Field**: `デフォルト: "Picture"`
    - **Word Field**: `デフォルト: "Expression"`
    - **Previous Sentence Field**: `デフォルト: ""` (空)
    - **Previous Image Field**: `デフォルト: ""` (空)
    - **Video Field**: `デフォルト: ""` (空)
    - **Game Name Field**: `デフォルト: ""` (空)
:::info
主要な4つのフィールドは**キー設定**タブでも利用できます。
:::

**タグを追加**
- **ツールヒント**: Ankiカード用のカンマ区切りのカスタムタグ。
- **デフォルト値**: `GSM`
- **詳細**: ここにリストされているタグ（カンマ区切り）は、GSMが更新するすべてのAnkiカードに追加されます。

<span style={{color: 'green', fontWeight: 'bold'}}>作業対象のタグ</span>
- **ツールヒント**: カンマ区切りのタグ。スクリプトはこれらのタグを持つカードに対してのみ1クリックを実行します...
- **デフォルト値**: (空)
- **詳細**: この設定はフィルターとして機能します。空の場合、GSMは最近作成されたAnkiカードを対象とします。入力されている場合（例: `_mining`）、GSMはその特定のタグをすでに持っているカードに対してのみ操作を行います。

<span style={{color: 'green', fontWeight: 'bold'}}>ゲームをタグとして追加</span> & <span style={{color: 'green', fontWeight: 'bold'}}>ゲームの親タグ</span>
- **ツールヒント（ゲームを追加）**: Ankiカードにゲームのタグを含めます。
- **ツールヒント（親タグ）**: ゲームタグの親タグ...
- **デフォルト値（ゲームを追加）**: `True`
- **デフォルト値（親タグ）**: `Game`
- **詳細**: これらの設定は、ゲームごとにカードを自動的に整理するために連携して機能します。「現在のゲーム」は、アクティブなOBSシーンによって決定されます。たとえば、`親タグ`が`Game`で現在のシーンが`FinalFantasyX`の場合、結果のAnkiタグは`Game::FinalFantasyX`となり、Ankiでネストされたタグが作成されます。

**音声を上書き / 画像を上書き**
- **ツールヒント**: Ankiカードの既存の音声/画像を上書きします。
- **デフォルト値（音声）**: `False`
- **デフォルト値（画像）**: `True`
- **詳細**: 有効にすると、GSMはそれぞれのフィールドの既存のコンテンツを置き換えます。無効にすると、フィールドがすでに埋まっている場合は新しいメディアを追加しません。

**複数行マイニングで文を上書き**
- **ツールヒント**: 複数行マイニングを使用する場合、選択した行の連結で文を上書きします。
- **デフォルト値**: `True`
- **詳細**: 複数行マイニング機能を使用する場合、この設定が有効になっていると、選択した行が結合され、Ankiの`Sentence Field`のコンテンツが上書きされます。

---

## VAD（音声区間検出）タブ {#vad-tab}

このタブには、音声区間検出（VAD）の設定が含まれており、話し言葉の対話を分離するためにオーディオクリップを自動的にトリミングします。

**音声検出後処理**
- **ツールヒント**: 音声を後処理してボイスラインだけをトリミングします。
- **デフォルト値**: `True`
- **詳細**: これはVADのマスタースイッチです。有効にすると、このタブのモデルと設定を使用して、音声をインテリジェントに検索してトリミングします。無効にすると、GSMはオフセットに基づいて生のオーディオスライスを取得します。

**言語**
- **ツールヒント**: VADの言語を選択します。
- **デフォルト値**: `ja` (日本語)
- **詳細**: このヒントは、VADモデル（特にWhisper）が対象言語の音声をより正確に検出するのに役立ちます。

**Whisperモデル**
- **ツールヒント**: VAD用のWhisperモデルサイズを選択します。
- **デフォルト値**: `base`
- **詳細**: ローカルWhisperモデルのサイズと精度を決定します。より大きなモデル（`small`、`medium`）はより正確ですが、速度が遅く、より多くのリソースを必要とします。`tiny`と`base`は高速です。

<span style={{color: 'darkorange', fontWeight: 'bold'}}>VADモデルを選択</span>
- **ツールヒント**: 使用するVADモデルを選択します。
- **デフォルト値**: `WHISPER`
- **詳細**: 音声検出の主要エンジン。
    - **WHISPER**: 高精度の文字起こしベースのVAD。モデルサイズとハードウェアによっては遅くなることがあります。
    - **SILERO**: 非常に高速で軽量、言語に依存しないVAD。Whisperよりも精度は低いですが、速度に優れています。

**バックアップVADモデル**
- **ツールヒント**: 音声が見つからない場合にバックアップとして使用するモデルを選択します。
- **デフォルト値**: `OFF`
- **詳細**: プライマリVADモデルが音声を見つけられなかった場合、GSMはこのバックアップモデルで再試行できます。一般的な戦略は、まず正確な`WHISPER`モデルを使用し、Whisperが失敗した場合は高速な`SILERO`モデルにフォールバックすることです。

**結果がない場合でも音声を追加**
- **ツールヒント**: VADで結果が見つからない場合でも音声を追加します。
- **デフォルト値**: `False`
- **詳細**: 有効にして、プライマリとバックアップの両方のVADモデルが音声を見つけられなかった場合、GSMは失敗する代わりに元のトリミングされていないオーディオクリップを保存します。

**フォールバックとしてTTSを使用 / TTS URL**
- **ツールヒント（TTS）**: 音声アクティビティが検出されない場合にテキスト読み上げを使用します。
- **ツールヒント（URL）**: TTSサービスのURL。
- **デフォルト値（TTS）**: `False`
- **デフォルト値（URL）**: `http://127.0.0.1:5050/?term=$s`
- **詳細**: VADが音声を見つけられなかった場合、GSMはテキスト読み上げサービスを使用して音声を生成できます。URLの`$s`は、文のテキストに置き換えられるプレースホルダーです。これは、人気のある[Game TTS](https://github.com/leokik/game-tts)サーバーなどのサービスと互換性があります。

<span style={{color: 'darkorange', fontWeight: 'bold'}}>音声終了オフセット</span>
- **ツールヒント**: ビデオの末尾から抽出するオフセット（秒）。
- **デフォルト値**: `0.5`
- **詳細**: この設定は、VADモデルに供給される**初期オーディオクリップ**の長さを定義します。これは、ビデオリプレイセグメントの期間に追加されます。`0.5`の値は、クリップが検出された音声セグメントよりも0.5秒長くなることを意味します。
:::info
この設定は**キー設定**タブでも利用できます。
:::

**開始をトリミング / 開始オフセット**
- **ツールヒント**: VADトリム後の開始オフセット...
- **デフォルト値（開始をトリミング）**: `False`
- **デフォルト値（開始オフセット）**: `-0.25`
- **詳細**: VADが音声の開始を見つけた後、これを微調整できます。デフォルトの`-0.25`秒のような小さな負のオフセットは、音声が始まる前に少しの無音を追加するのに役立ち、音がクリップされないようにします。これは「開始をトリミング」がチェックされている場合にのみ適用されます。

**セグメントをカットして結合 / パディング**
- **ツールヒント**: 検出された音声セグメントをカットして再度貼り付けます...
- **デフォルト値（カットして結合）**: `False`
- **デフォルト値（パディング）**: `0.1`
- **詳細**: 複数の休止があるオーディオクリップ用の高度な機能。有効にすると、VADはすべての個別の音声セグメントを見つけ、それらを切り取り、各セグメント間に`パディング`秒の無音を入れて1つのファイルに結合します。
:::info
この設定は**キー設定**タブでも利用できます。
:::

---

## 機能タブ {#features-tab}

このタブは、さまざまな自動化された動作と生活の質の向上機能を制御します。

**更新時に通知**
- **ツールヒント**: 更新が発生したときにユーザーに通知します。
- **デフォルト値**: `True`
- **詳細**: 有効にすると、GSMはAnkiカードを正常に更新するたびにシステム通知ポップアップを表示します。

**Anki編集を開く / Ankiノートをブラウザで開く**
- **ツールヒント**: 編集のためにAnkiを自動的に開く... / ブラウザでAnkiノートを開く...
- **デフォルト値（編集）**: `False`
- **デフォルト値（ブラウザ）**: `True`
- **詳細**: 即時のフィードバックを提供します。カードを更新した後、GSMはAnkiカードエディタウィンドウを開くか、更新されたばかりのカードに焦点を当てたAnkiブラウザを開くことができます。
:::info
この設定は**キー設定**タブでも利用できます。
:::

**ブラウザクエリ**
- **ツールヒント**: ブラウザでAnkiノートを開くときに使用するクエリ。例: 'Added:1'
- **デフォルト値**: `""` (空文字列)
- **詳細**: 「ブラウザでAnkiノートを開く」が有効な場合、このAnki検索クエリが表示されるカードを決定します。空のクエリは、変更されたばかりの単一のカードを表示するデフォルトになります。`added:1`のようなクエリは、過去1日に追加されたすべてのカードを表示します。

**LongPlayを生成**
- **ツールヒント**: OBS録画を使用してLongPlayビデオを生成し、gsmに入ってくるすべてのテキストを含む.srtファイルに書き込みます。設定を有効にするには再起動が必要です。
- **デフォルト値**: `False`
- **詳細**: 実験的な機能。有効にすると、GSMはリプレイバッファと並行してOBSで連続録画を開始します。また、GSMが受信したすべてのテキストを含む`.srt`字幕ファイルを生成し、タイムスタンプをビデオと同期させます。有効にするにはGSMの再起動が必要です。

---

## スクリーンショットタブ {#screenshot-tab}

このタブは、スクリーンショットのキャプチャ、処理、タイミングに関するすべてを制御します。

**有効**
- **ツールヒント**: スクリーンショット処理を有効または無効にします。
- **デフォルト値**: `True`
- **詳細**: すべてのスクリーンショット機能のマスタースイッチ。

**幅 / 高さ / 品質 / 拡張子**
- **詳細**: これらの設定は、画像の最終出力を制御します。
    - **幅/高さ**: `デフォルト: 0`。`0`または`-1`の値は、他の次元をリサイズしながら元のアスペクト比を維持します。
    - **品質**: `デフォルト: 85`。`jpeg`や`webp`などの非可逆形式の場合、圧縮率（0-100）を制御します。
    - **拡張子**: `デフォルト: "webp"`。`webp`または`avif`は、品質とファイルサイズのバランスが良いため推奨されます。`png`は、より大きなファイルサイズで可逆品質を提供します。

**アニメーション**
- **ツールヒント**: 静止画像の代わりにアニメーションスクリーンショットを作成します。
- **デフォルト値**: `False`
- **詳細**: 有効にすると、GSMは単一の画像の代わりに短いループするビデオクリップ（AVIF形式）を作成します。クリップの長さはVADの結果によって決まります。

<details>
<summary>例</summary>

![Animated Screenshot Example](../../../../docs/assets/settings/animated.webp)

これは、「アニメーション」設定が有効になっている場合のアニメーションスクリーンショットの外観です。単一のフレームの代わりに、シーンの短いループクリップが作成されます。

</details>


<span style={{color: 'red', fontWeight: 'bold'}}>FFmpeg再エンコードオプション</span>
- **ツールヒント**: スクリーンショットを再エンコードするためのカスタムFFmpegオプション。
- **デフォルト値**: `""` (空文字列)
- **詳細**: 上級ユーザー向け。このフィールドを使用すると、上記の基本設定を上書きして、画像変換用の独自のFFmpegコマンドライン引数を指定できます。

**スクリーンショットタイミング & <span style={{color: 'darkorange', fontWeight: 'bold'}}>スクリーンショットオフセット</span>**
- **ツールヒント（タイミング）**: 行に対してスクリーンショットを撮るタイミングを選択します：開始、中間、または終了。
- **ツールヒント（オフセット）**: 選択したタイミングポイントからスクリーンショットをオフセットする時間（秒）。
- **デフォルト値（タイミング）**: `beginning`
- **デフォルト値（オフセット）**: `1.0`
- **詳細**: これらの設定は、完璧なスクリーンショットを取得するために重要です。最終的なタイムスタンプは、タイミングアンカーとオフセットに基づいて計算されます。
    - **例1**: デフォルト設定（`beginning`、`1.0`）では、スクリーンショットは行が表示されてから1.0秒*後*に撮影されます。
    - **例2**: 行が消える直前にスクリーンショットを撮るには、タイミングを`end`に、オフセットを`0.0`に設定します。

**すべてのカードでスクリーンショットセレクターを使用**
- **ツールヒント**: すべてのカードでスクリーンショットセレクターを使用してスクリーンショットポイントを選択できるようにします。
- **デフォルト値**: `False`
- **詳細**: 有効にすると、すべてのカードに対して手動でフレームごとにスクリーンショットを選択するツールがポップアップし、目的の正確なフレームを選択できます。

**スクリーンショットホットキーでAnkiを更新**
- **ツールヒント**: スクリーンショットホットキー/ボタンで最新のAnkiカードを更新できるようにします。
- **デフォルト値**: `False`
- **詳細**: 有効にすると、「スクリーンショットを撮る」ホットキーを使用すると、スクリーンショットを保存するだけでなく、最近更新されたAnkiカードに追加しようとします。

---

## 音声タブ {#audio-tab}

このタブは、音声抽出と処理の詳細を制御します。

**有効**
- **ツールヒント**: 音声処理を有効または無効にします。
- **デフォルト値**: `True`
- **詳細**: すべての音声機能のマスタースイッチ。

**音声拡張子**
- **ツールヒント**: 音声ファイルのファイル拡張子。
- **デフォルト値**: `opus`
- **詳細**: 最終的なクリップの音声形式。`opus`は、優れた圧縮率と品質のため、強く推奨されます。

<span style={{color: 'darkorange', fontWeight: 'bold'}}>音声抽出開始オフセット</span>
- **ツールヒント**: ビデオの開始から抽出するオフセット（秒）（通常は負または0）。
- **デフォルト値**: `-0.5`
- **詳細**: この重要な設定は、行が登録された時点からの初期オーディオスライスの開始時間を調整します。リプレイバッファはトリガーする*前*にビデオをキャプチャするため、この値はほとんど常に**負**です。登録された行の*前*にどれだけの時間をオーディオクリップに含めるかを決定し、音声の開始が途切れないようにします。
:::info
この設定は**キー設定**タブでも利用できます。
:::

<span style={{color: 'red', fontWeight: 'bold'}}>音声抽出終了オフセット（VAD前）</span>
- **ツールヒント**: VAD処理が開始される前に末尾からトリミングするオフセット（秒）。
- **デフォルト値**: `0.0`
- **詳細**: VADに送信される前の初期オーディオクリップを*末尾から*短くする高度なパラメータ。デフォルトの`0.0`は何もしません。正の値は音声が終わった後に追加の音声を取得するのに役立ち、負の値は末尾の不要なノイズやエコーを除去するのに役立ちます。
:::info
この設定は**キー設定**タブでも利用できます。
:::

<span style={{color: 'red', fontWeight: 'bold'}}>FFmpeg再エンコードオプション</span> & FFmpegプリセットオプション
- **ツールヒント**: カスタムFFmpegオプション... / プリセットFFmpegオプションを選択...
- **デフォルト値**: (OSによって異なり、通常はフェードインが含まれます)
- **詳細**: これらは、最終的にトリミングされたオーディオクリップがどのようにエンコードされるかを制御します。
    - **プリセットオプション**: 音量を正規化する（`loudnorm`）やクリッピングを防ぐためにフェードインを追加する（デフォルトの動作）などの一般的なタスクのためのテスト済みFFmpegコマンドのドロップダウン。これらのオプションを設定する推奨方法です。
    - **再エンコードオプション**: プリセットから「カスタム」を選択した場合、ここで独自のFFmpegコマンドを記述して完全な制御ができます。

<span style={{color: 'green', fontWeight: 'bold'}}>外部音声編集ツール</span>
- **ツールヒント**: 手動トリミングのために音声を開く外部ツールのパス...
- **デフォルト値（パス）**: `""` (空文字列)
- **デフォルト値（有効）**: `True`
- **詳細**: サードパーティのオーディオエディタとの統合を許可します。パスが提供され、これが有効になっている場合、GSMはAnkiに保存する前に、指定されたプログラム（OcenAudio、Audacityなど）でトリミングされた音声ファイルを開いて手動で確認します。「Ocenaudioをインストール」ボタンでこれを自動的に設定できます。
:::info
この設定は**キー設定**タブでも利用できます。
:::

<span style={{color: 'green', fontWeight: 'bold'}}>Ankiメディアコレクション</span>
- **ツールヒント**: 外部トリミングツールで使用されるAnkiメディアコレクションのパス。
- **デフォルト値**: `""` (空文字列)
- **詳細**: Ankiプロファイルディレクトリ内の`collection.media`フォルダへのフルパスである必要があります。外部音声編集ツール機能がファイルを正しい場所に保存するために使用します。「Ankiメディアコレクションを取得」ボタンでこのパスを自動的に検索して設定できます。

---

## OBSタブ {#obs-tab}

このタブは、OBS（Open Broadcaster Software）との統合を制御します。

**OBSを開く / OBSを閉じる**
- **ツールヒント**: GSM開始時にOBSを開く / GSM終了時にOBSを閉じる。
- **デフォルト値（開く）**: `True`
- **デフォルト値（閉じる）**: `True`
- **詳細**: GSMと同時にOBSアプリケーションを管理するための便利な設定。

**OBSパス**
- **ツールヒント**: OBS実行可能ファイルへのパス。
- **デフォルト値**: (自動検出されたパス)
- **詳細**: `obs64.exe`（または同等のもの）へのパス。GSMはこれを自動的に見つけようとしますが、必要に応じて手動で指定できます。

**ホスト / ポート / パスワード**
- **詳細**: これらの設定は、OBS WebSocketプラグインに接続するためのものです。これはOBSで有効にする必要があります（`ツール > WebSocketサーバー設定`）。ここの値はOBSの設定と一致する必要があります。
    - **ホスト**: `デフォルト: "127.0.0.1"`
    - **ポート**: `デフォルト: 7274`
    - **パスワード**: `デフォルト: "your_password"` (**実際のOBS WebSocketパスワードに変更する必要があります！**)

**最小リプレイサイズ（KB）**
- **ツールヒント**: OBSリプレイの最小リプレイサイズ（KB）。リプレイがこれより小さい場合、音声/スクリーンショットは取得されません。
- **デフォルト値**: `0`
- **詳細**: 空または破損したリプレイファイルの処理を防ぐためのフィルター。新しいリプレイビデオがこのサイズ（キロバイト単位）より小さい場合、GSMはそれを無視します。0の値はこのチェックを無効にします。

**リプレイバッファを自動的に管理**
- **ツールヒント**: ゲームが検出されたかどうかに基づいてOBSリプレイバッファを自動的に開始/停止します。
- **デフォルト値**: `True`
- **詳細**: システムリソースを節約するため、GSMはゲームソースからのビデオ出力が検出されたときにリプレイバッファを自動的に開始し、非アクティブ期間（黒い画面など）の後に停止できます。

---

## プロファイルタブ {#profiles-tab}

このタブでは、さまざまなゲームやユースケース用に複数の設定を管理できます。

**プロファイルを選択**
- **ツールヒント**: プロファイルを選択してその設定を読み込みます。
- **詳細**: ドロップダウンには、保存されているすべてのプロファイルが表示されます。プロファイルを選択すると、すべてのタブにわたる関連設定がすぐに読み込まれます。`Default`プロファイルは削除できません。

**プロファイルを追加 / コピー / 削除**
- **詳細**:
    - **プロファイルを追加**: デフォルト設定に基づいて新しいプロファイルを作成します。
    - **プロファイルをコピー**: 現在選択されているプロファイルの複製を作成します。
    - **プロファイルを削除**: 現在選択されているプロファイルを削除します（`Default`を除く）。

**OBSシーン（プロファイルを自動切り替え）**
- **ツールヒント**: このプロファイルに関連付けるOBSシーンを選択します。（オプション）
- **詳細**: これは自動プロファイル切り替え機能の中核です。ここで、1つ以上のOBSシーンを現在のプロファイルにリンクできます。OBSが選択したシーンのいずれかに切り替わると、GSMはこのプロファイルを自動的にアクティブにします。`Ctrl`または`Shift`を押しながら複数のシーンを選択できます。

**シーンが見つからない場合はデフォルトに切り替え**
- **ツールヒント**: 現在のOBSシーンに一致するプロファイルがない場合、「Default」プロファイルに切り替えます。
- **デフォルト値**: `True`
- **詳細**: 特定のプロファイルにリンクされていないOBSシーンに切り替えた場合、この設定がフォールバック動作を決定します。有効にすると、GSMは`Default`プロファイルに切り替わります。無効にすると、最後にアクティブだったプロファイルのままになります。

---

## AIタブ {#ai-tab}

このタブは、自動翻訳やコンテキスト生成などの生成AI機能を設定します。

**有効**
- **ツールヒント**: AI統合を有効または無効にします。
- **デフォルト値**: `False`
- **詳細**: AI機能のマスタースイッチ。インターネット接続と有効なAPIキーが必要です。

**プロバイダー、モデル、APIキー**
- **詳細**: AIサービス、特定のモデルを選択し、シークレットAPIキーを入力します。
    - **プロバイダー**: `デフォルト: 'Gemini'`。Google Gemini、Groq、または任意のOpenAI互換API（ローカルLLMサーバーなど）から選択します。
    - **Geminiモデル**: `デフォルト: 'gemini-2.5-flash-lite'`。目的のGoogleモデルを選択します。
    - **Groqモデル**: `デフォルト: 'meta-llama/llama-4-scout-17b-16e-instruct'`。目的のGroqモデルを選択します。
    - **OpenAI URL/モデル/APIキー**: OpenAI API形式を使用するローカルモデルまたはその他のサービス用。
    - **APIキーフィールド**: 選択したプロバイダーのシークレットAPIキーを入力します。

**Ankiフィールド**
- **ツールヒント**: AI生成コンテンツ用のAnkiのフィールド。
- **デフォルト値**: `""` (空文字列)
- **詳細**: AIからの出力が配置されるAnkiフィールドの名前（例: `Translation`または`AI_Context`フィールド）。

**既定の... / カスタムプロンプトを使用**
- **詳細**: これはAIに与える指示を制御します。
    - **既定の翻訳プロンプトを使用**: ゲームの対話を翻訳するための事前に記述され、最適化されたプロンプト。
    - **既定のコンテキストプロンプトを使用**: シーンの簡単な要約を生成するための事前に記述されたプロンプト。
    - **カスタムプロンプト**: どちらの既定プロンプトも選択されていない場合、このテキストボックスでAIへの独自の指示を記述できます。ゲームの対話はカスタムプロンプトに追加されます。

**対話コンテキストの長さ**
- **ツールヒント**: AIのコンテキストとして含める前後の行数。
- **デフォルト値**: `10`
- **詳細**: 翻訳品質を向上させるため、GSMは周囲の対話行をAIにコンテキストとして送信できます。この値は、現在の行の前後に含める行数を制御します。`-1`の値は利用可能なすべての行を送信します。`0`の値はコンテキストを送信しません。

---

## 詳細設定タブ {#advanced-tab}

このタブには、上級ユーザーまたはニッチなワークフロー向けのその他の設定が含まれています。

**オーディオプレーヤーパス / ビデオプレーヤーパス**
- **ツールヒント**: オーディオ/ビデオプレーヤー実行可能ファイルへのパス。
- **デフォルト値**: `""` (空文字列)
- **詳細**: 下のホットキーを使用してコンテンツをすばやくプレビューするために、メディアプレーヤー（MPC-HCやVLCなど）を指定します。ビデオプレーヤーオプションは、元のリプレイファイルの正しいタイムスタンプにシークすることもできます。

**ホットキー**
- **詳細**: さまざまなアクションのキーボードショートカットを設定します。
    - **最新のビデオ/オーディオを再生ホットキー**: `デフォルト: 'f7'`
    - **スクリーンショットを撮るホットキー**: `デフォルト: 'f6'`
    - **行をリセットホットキー**: `デフォルト: 'f5'`

**複数行マイニング設定**
- **詳細**: これらは複数行マイニング機能の動作を制御します。
    - **複数行の改行**: `デフォルト: '<br>'` (結合された文の間に挿入する文字)。
    - **複数行の文保存フィールド**: `デフォルト: ""` (ワークフローで必要な場合、結合されたテキストを保持するためのAnkiの一時的なフィールド)。

**Websocketポート**
- **詳細**: 高度な通信機能のポートを設定します。
    - **OCR WebSocketポート**: `デフォルト: 9002` (外部OCRツールからテキストを受信するためのポート)。
    - **Texthooker通信WebSocketポート**: `デフォルト: 55001`
    - **プレーンテキストWebSocketエクスポートポート**: `デフォルト: 55002`

---

## オーバーレイタブ {#overlay-tab}

このタブは、実験的なリアルタイムテキストオーバーレイ機能を設定します。

**Websocketポート**
- **ツールヒント**: オーバーレイWebSocketサーバーが実行されるポート。
- **デフォルト値**: `55499`
- **詳細**: GSMオーバーレイクライアントが接続するポート。オーバーレイアプリケーションの設定と一致する必要があります。これはおそらく変更すべきではありません。

**オーバーレイモニター**
- **ツールヒント**: オーバーレイ用にキャプチャするモニター。
- **デフォルト値**: `モニター1`
- **詳細**: ゲームが実行されているモニターを選択します。オーバーレイはこのモニターをキャプチャしてOCRを実行します。

**オーバーレイエンジン**
- **ツールヒント**: オーバーレイに使用するOCRエンジン。
- **デフォルト値**: `lens`
- **詳細**:
    - **lens (Google Lens)**: 遅いが非常に正確。スクリーンショットをGoogleのサーバーに送信して処理します。
    - **oneocr**: 高速なローカルOCRエンジン。Lensよりも精度は低いですが、完全にマシン上で実行され、はるかに高速です。

**スキャン遅延**
- **ツールヒント**: テキストフックを受信してから画面スキャンを実行するまでの遅延（秒）。
- **デフォルト値**: `0.25`
- **詳細**: テキストが画面に完全にレンダリングされるのを待つための小さな遅延を追加します。ゆっくりスクロールしたりアニメーションしたりするテキストのあるゲームでは、この値を増やしてください。

**定期的なスキャン**
- **ツールヒント**: テキストフックイベントがなくても定期的に画面をスキャンします。
- **デフォルト値**: `False`
- **詳細**:
    - **定期的**: 有効にすると、GSMは指定された間隔で継続的に画面をスキャンしてテキストを探します。
    - **定期間隔**: 定期的なスキャン間の時間（秒）。
    - **定規比率**: 類似性しきい値（0.0〜1.0）。新しいスキャンのテキストが前のスキャンのテキストとこれより類似性が低い場合にのみオーバーレイに送信され、スパムを防ぎます。

**最小文字サイズ**
- **ツールヒント**: OCRで検出される文字の最小サイズ（ピクセル単位）。
- **デフォルト値**: `0`
- **詳細**: 画面上の小さくて無関係なテキストを無視するためのフィルターです。簡単なふりがなフィルターとして機能します。「最小文字サイズファインダー」ツールを使用して、ゲームに適した値を決定できます。`0`の値はフィルターを無効にします。

**手動スキャンホットキー**
- **ツールヒント**: 手動で画面スキャンをトリガーするホットキー。
- **デフォルト値**: `F8`
- **詳細**: このホットキーを押すと、すぐに画面がキャプチャされ、OCRスキャンが実行され、検出されたテキストがオーバーレイに送信されます。テストや通常のテキストフックイベント以外でテキストをキャプチャする場合、または通常のスキャンですべてをキャッチできなかった場合に便利です。
